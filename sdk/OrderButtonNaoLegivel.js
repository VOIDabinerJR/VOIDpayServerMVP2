document.addEventListener('DOMContentLoaded', () => { const container = document.querySelector('#void-button-container'); const button = document.createElement('button'); button.id = 'void-pay-button'; button.type = 'submit'; const icon = document.createElement('img'); icon.src = 'https://raw.githubusercontent.com/VOIDabinerJR/sdk/main/void.jpg'; icon.alt = 'Ícone do Void Pay'; icon.style.verticalAlign = 'middle'; const buttonText = document.createTextNode('Pagar'); button.appendChild(buttonText); button.appendChild(icon); button.style.display = 'inline-block'; button.style.backgroundColor = '#0a0a0a'; button.style.color = 'white'; button.style.fontSize = '18px'; button.style.padding = '10px 20px'; button.style.border = 'none'; button.style.borderRadius = '5px'; button.style.cursor = 'pointer'; button.style.textAlign = 'center'; button.style.textDecoration = 'none'; button.style.transition = 'background-color 0.3s, box-shadow 0.3s, transform 0.1s'; button.addEventListener('mouseenter', () => { button.style.backgroundColor = '#0a0a0a'; button.style.boxShadow = '0 12px 24px rgba(0, 0, 0, 0.4)'; }); button.addEventListener('mouseleave', () => { button.style.backgroundColor = '#0a0a0a'; button.style.boxShadow = 'none'; }); button.addEventListener('mousedown', () => { button.style.backgroundColor = '#0a0a0a'; button.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.2)'; button.style.transform = 'translateY(2px)'; }); button.addEventListener('mouseup', () => { button.style.backgroundColor = '#0a0a0a'; button.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)'; button.style.transform = 'translateY(0)'; }); button.addEventListener('click', async (event) => { event.preventDefault(); const aa = document.getElementById('product-id').value; const bb = document.getElementById('quantity').value; const cc = document.getElementById('void-button-container').getAttribute('name'); const data = { buttonToken: cc, products: aa, description: "1234567890" }; try { const response = await fetch('http://localhost:3000/order/createOrder', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) }); if (!response.ok) throw new Error('Network response was not ok'); const result = await response.json(); window.location.href = `http://localhost:3000/pay/pay?orderid=${result.orderId}&buttontoken=${result.buttonToken}`; } catch (error) { console.error('There was a problem with the fetch operation:', error); } }); container.appendChild(button); });
